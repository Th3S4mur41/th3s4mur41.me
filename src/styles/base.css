:root {
	--color-bg: oklch(0.25 0 0);
	--color-subtle-bg: oklch(0 0 0);
	--color-highlight: oklch(0.4 0 0);
	--color-text: oklch(1 0 0);
	--color-subtle-text: oklch(0.8 0 0);
	--color-accent: oklch(0.86 0.18 90.53);

	--grid-columns: [full-width-start] 1fr [margin-start] 1rem [content-start] min(80ch, calc(100vi - 2rem)) [content-end]
		1rem [margin-end] 1fr [full-width-end];
}

@view-transition {
	/*  biome-ignore lint/correctness/noUnknownProperty: navigation is a new property for view-transition */
	navigation: auto;
}

@media (prefers-reduced-motion: no-preference) {
	:root {
		interpolate-size: allow-keywords;
	}
	html {
		scroll-behavior: smooth;
	}
}

body {
	margin: unset;
	min-block-size: 100svb;
	display: flex;
	flex-direction: column;
	justify-content: stretch;
	background-color: var(--color-bg);
	font-family: sans-serif;
	line-height: 1.5;
	color: var(--color-text);
}

header {
	/* TODO: replace with good layout */
	& > h1 {
		position: fixed;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		border: 0;
	}

	/* hero image */
	& > img {
		width: 100%;
		height: auto;
		object-fit: cover;
		view-transition-name: hero-image;
	}
}

:is(h1, h2, h3) {
	font-weight: 300;
	line-height: 1.25;
	letter-spacing: 0.05ch;
	text-transform: uppercase;
	text-wrap: balance;
}

/* Eyebrow text above main heading */
.eyebrow {
	margin-block-end: 0.25rem;
	font-size: 1rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.1ch;
	color: var(--color-accent);
	text-wrap: balance;

	& + h1 {
		margin-block-start: 0;
	}
}

p {
	text-wrap: pretty;

	@media (prefers-reduced-motion: no-preference) {
		animation: fadeIn 1ms linear both;
		animation-timeline: view();
		animation-range: entry 10% entry 60%;
	}
}

main {
	flex-grow: 1;
	display: grid;
	grid-template-columns: var(--grid-columns);
	grid-auto-rows: min-content;
	margin-block: 2rem;
	container: main / inline-size;

	& > * {
		grid-column: content;
	}
}

/* main navigation */
body > nav {
	justify-items: center;
	position: sticky;
	z-index: 1;
	top: 0.25rem;

	& > ul {
		display: flex;
		list-style: none;
		justify-content: center;
		margin: unset;
		padding: unset;
	}

	& li {
		border: 2px solid transparent;
		background:
			radial-gradient(circle at 50% 250%, var(--color-subtle-bg), var(--color-bg)),
			linear-gradient(var(--color-bg), var(--color-subtle-bg));
		background-clip: padding-box, border-box;
		background-origin: padding-box, border-box;

		box-shadow:
			0 0.75rem 1rem -0.25rem hsl(var(--hsl-shadow) / 0.06),
			0 0.25rem 0.375rem -0.125rem hsl(var(--hsl-shadow) / 0.02);

		&:is(:hover, :focus-within) {
			background:
				radial-gradient(circle at 50% 250%, var(--color-subtle-bg) 75%, var(--color-highlight)),
				linear-gradient(var(--color-highlight), var(--color-subtle-bg));
			background-clip: padding-box, border-box;
			background-origin: padding-box, border-box;
		}

		& a {
			display: block;
			padding-inline: 1.5rem;
			padding-block: 0.5rem;
			color: var(--color-text);
			text-decoration: none;
			text-transform: uppercase;

			&[aria-current] {
				font-weight: bold;
			}
		}
		&:first-of-type {
			border-start-start-radius: 0.5rem;
			border-end-start-radius: 0.5rem;
			border-inline-end-width: 1px;
		}
		&:last-of-type {
			border-start-end-radius: 0.5rem;
			border-end-end-radius: 0.5rem;
			border-inline-start-width: 1px;
		}
		&:not(:first-of-type):not(:last-of-type) {
			border-inline-width: 1px;
		}
	}
}

body > footer {
	padding-block: 2rem;
	border-block-start: 2px solid transparent;
	background:
		radial-gradient(circle at 50% 250%, var(--color-subtle-bg), var(--color-bg)),
		linear-gradient(var(--color-bg), var(--color-subtle-bg));
	background-clip: padding-box, border-box;
	background-origin: padding-box, border-box;
	box-shadow:
		0 0.75rem 1rem -0.25rem hsl(var(--hsl-shadow) / 0.06),
		0 0.25rem 0.375rem -0.125rem hsl(var(--hsl-shadow) / 0.02);
	display: grid;
	grid-template-columns: var(--grid-columns);

	& > * {
		grid-column: content;
	}
	& > small {
		display: grid;
		grid-template: "nav to-top" "copyright copyright" / 1fr auto;
		row-gap: 1.5rem;
		justify-items: center;

		padding-block-start: 1rem;
		margin-block-start: 1rem;
		border-block-start: 1px solid oklch(0.5 0 0);

		& > .to-top {
			grid-area: to-top;
			justify-self: end;
		}
		& > nav {
			grid-area: nav;
			justify-self: start;
			display: flex;
			gap: 1.5ch;
		}
		& > .copyright {
			grid-area: copyright;
			display: flex;
			flex-direction: column;
			gap: 1em;
			align-items: center;

			& > img {
				inline-size: 15em;
				block-size: auto;
			}
		}
	}
}

a {
	text-underline-offset: 0.2em;
}

a.to-top {
	color: inherit;
	text-decoration: none;
	&:is(:hover, :focus) {
		text-decoration: underline;
	}
	&::after {
		content: " â†‘" / "";
	}
}

hr {
	border: none;
	block-size: 0.1rem;
	inline-size: stretch;
	background: linear-gradient(to right, transparent, var(--color-text), transparent);
}

a:has(> article) {
	color: inherit;
	text-decoration: none;
	border: 2px solid transparent;
	border-radius: 0.5rem;
	padding-inline: 2rem;
	padding-block: 1.5rem;

	&:is(:hover, :focus) {
		background:
			radial-gradient(circle at 50% 250%, var(--color-subtle-bg), var(--color-bg)),
			linear-gradient(var(--color-subtle-bg), var(--color-bg));
		background-clip: padding-box, border-box;
		background-origin: padding-box, border-box;

		box-shadow:
			0 0.75rem 1rem -0.25rem hsl(var(--hsl-shadow) / 0.06),
			0 0.25rem 0.375rem -0.125rem hsl(var(--hsl-shadow) / 0.02);

		h2,
		h3 {
			text-decoration: underline;
		}
	}
}

a {
	color: var(--color-accent);
}

a.author {
	font-weight: 600;
	color: inherit;
	&:is(:hover, :focus) {
		color: var(--color-text);
	}
}

.emoji,
.emoji > * {
	/* avoid layout breaking when astro wraps the emoji in an additional p tag */
	display: inline;
}

.emoji > p {
	margin-block: unset;
}

li:has(> .emoji) {
	list-style-type: "";
	margin-block-end: 0.5em;

	& > .emoji {
		margin-inline-start: -4ch;
		margin-inline-end: 1.3ch;
	}
}

ol {
	list-style-position: outside; /* default */
	padding-inline-start: 1ch;
	margin-inline-start: 1em;
}

ol > li {
	position: relative;
	margin-block-end: 0.5em;
	padding-inline-start: 1.5ch;

	&::marker {
		font-weight: 600;
		color: var(--color-bg);
	}
	&::before {
		content: "";
		display: inline-block;
		position: absolute;
		top: 0;
		left: -2.3ch;
		background-color: var(--color-accent);
		border-radius: 0.25rem;
		inline-size: 2.1ch;
		block-size: 1lh;
		z-index: -1;
	}
}
