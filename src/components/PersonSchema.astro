---
import StructuredData from "./StructuredData.astro";

interface Props {
	name: string;
	url: string;
	sameAs?: string[];
	image?: {
		src: string;
		attributes?: {
			width?: number;
			height?: number;
		};
	};
	description?: string;
}

const { name, url, sameAs, image, description } = Astro.props;

const origin = Astro.url.origin;
const absolute = (maybeUrl: string) => new URL(maybeUrl, origin).href;

const jsonLd = {
	"@context": "https://schema.org",
	"@type": "Person",
	name,
	url,
	...(description ? { description } : {}),
	...(sameAs?.length ? { sameAs } : {}),
	...(image?.src
		? {
			image: {
				"@type": "ImageObject",
				url: absolute(image.src),
				...(image.attributes?.width ? { width: image.attributes.width } : {}),
				...(image.attributes?.height ? { height: image.attributes.height } : {}),
			},
		}
		: {}),
};
---

<StructuredData data={jsonLd} />
